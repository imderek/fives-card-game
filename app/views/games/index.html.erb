<%= turbo_stream_from "games" %>

<div class="max-w-7xl mx-auto p-4 py-6">
  <div class="flex flex-row justify-between mb-5">
    <h1 class="text-3xl font-bold text-white dark:text-white">Lobby</h1>
    <%= button_to "Sign Out", destroy_user_session_path, 
        method: :delete,
        class: "px-4 py-2 text-sm bg-gray-400 text-white rounded-lg bg-white/20 hover:bg-gray-500 dark:bg-slate-500/50 dark:hover:bg-white/30" %>
  </div>

  <!-- Start New Game -->
  <div class="mb-5 bg-white/30 dark:bg-slate-500/50 dark:text-white p-6 rounded-lg shadow-xl">
    <h2 class="text-xl font-semibold mb-4">Start New Game</h2>
    <div class="flex gap-4">
      <%= link_to "Play vs Bot",
                  new_game_path(type: :bot), 
                  class: "px-4 py-2 bg-white text-white rounded-lg hover:bg-red-400 dark:bg-red-500 dark:hover:bg-red-400" %>
      <%#= link_to "Play vs Player", 
                  new_game_path(type: :pvp), 
                  class: "px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700" %>
    </div>
  </div>

  <h1 class="text-xl font-medium mb-4 dark:text-white">Leaderboard</h1>
  <div class="grid gap-4 mb-5">
    <div class="text-sm flex flex-col divide-y divide-slate-700 *:py-2 first:*:pt-0 last:*:pb-0 justify-between bg-white dark:bg-slate-500/50 dark:text-white py-4 px-4 rounded-lg shadow-xl">
      <% @leaderboard.each_with_index do |user, index| %>
        <div class="flex flex-row justify-between">
          <div class=""><span class="inline-block w-5 text-slate-400"><%= index + 1 %></span> <%= user.email %></div>
          <div class=""><%= user.wins %></div>
        </div>
      <% end %>
    </div>
  </div>

  <!-- Recent Games -->
  <h1 class="text-xl font-semibold mb-4 dark:text-white">Recent Games</h1>
  <div id="games_list" class="grid gap-4">
    <% @games.each do |game| %>
      <%= render "games/game", game: game %>
    <% end %>
  </div>

</div>